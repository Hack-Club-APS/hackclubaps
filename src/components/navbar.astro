---
import { Terminal, Moon, Sun, Menu, X } from 'lucide-react';
---

<nav id="navbar" class="fixed top-0 w-full z-50 transition-all duration-300 py-5">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 flex justify-between items-center">
    <div class="flex items-center gap-2 group cursor-pointer">
      <a href="https://hackclub.com" class="bg-[#ec3750] text-white p-1 rounded-md transform group-hover:-rotate-5 group-hover:bg-radial-gradient-[at_50%_50%] from-[#ec3750] to-[#ff8c37] transition-transform duration-300">
        <Terminal size={24} />
      </a>
      <a href="https://hackclub.com" class="font-bold text-xl tracking-tight text-slate-900 dark:text-white hover:text-[#ec3750] transition-colors">
        hack club <a href="https://adanipublicschool.org" target="_blank" class="text-slate-400 dark:text-slate-500 font-normal dark:hover:text-[#FFFFFF] transition-colors">@ APS</a>
      </a>
    </div>

    <div class="hidden md:flex items-center gap-8 font-medium text-slate-600 dark:text-slate-300">
      <a href="#mission" class="hover:text-[#ec3750] transition-colors">Mission</a>
      <a href="#activities" class="hover:text-[#ec3750] transition-colors">Activities</a>
      <a href="#events" class="hover:text-[#ec3750] transition-colors">Events</a>

      <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-200/20 transition-colors text-slate-600 dark:text-yellow-400" title="Toggle Dark Mode">
        <span class="block dark:hidden"><Moon size={20} /></span>
        <span class="hidden dark:block"><Sun size={20} /></span>
      </button>

      <a href="#join" class="px-5 py-2 bg-[#ec3750] text-white rounded-full font-bold hover:bg-[#d63248] hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200">
        Join the Club
      </a>
    </div>

    <div class="flex items-center gap-4 md:hidden">
      <button id="theme-toggle-mobile" class="p-2 rounded-full text-slate-600 dark:text-yellow-400">
         <span class="block dark:hidden"><Moon size={24} /></span>
         <span class="hidden dark:block"><Sun size={24} /></span>
      </button>
      <button id="menu-toggle" class="text-slate-800 dark:text-white p-2">
        <span id="icon-menu" class="block"><Menu size={28} /></span>
        <span id="icon-close" class="hidden"><X size={28} /></span>
      </button>
    </div>
  </div>

  <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-[#FFFFFF90] dark:bg-[#12121790] backdrop-blur-[24px] saturation-180 border-b border-slate-100 dark:border-slate-800 p-4 flex flex-col gap-4 shadow-xl">
    <a href="#mission" class="text-lg font-medium text-slate-700 dark:text-slate-200 mobile-link">Mission</a>
    <a href="#activities" class="text-lg font-medium text-slate-700 dark:text-slate-200 mobile-link">Activities</a>
    <a href="#events" class="text-lg font-medium text-slate-700 dark:text-slate-200 mobile-link">Events</a>
    <a href="#join" class="text-lg font-bold text-[#ec3750] mobile-link">Join Now &rarr;</a>
  </div>
</nav>

<script>
  // --- Navbar Scroll Effect ---
  const navbar = document.getElementById('navbar');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 20) {
      navbar?.classList.add('bg-white/90', 'dark:bg-[#12121790]', 'shadow-sm', 'dark:shadow-[#30303020]/50', 'backdrop-blur-[24px]', 'py-3', 'saturation-180');
      navbar?.classList.remove('bg-transparent', 'py-5');
    } else {
      navbar?.classList.add('bg-transparent', 'py-5');
      navbar?.classList.remove('bg-white/90', 'dark:bg-[#12121790]', 'shadow-sm', 'dark:shadow-[#30303020]/50', 'backdrop-blur-[24px]', 'py-3', 'saturation-180');
    }
  });

  // --- Mobile Menu Toggle ---
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const iconMenu = document.getElementById('icon-menu');
  const iconClose = document.getElementById('icon-close');
  const mobileLinks = document.querySelectorAll('.mobile-link');
  const header = document.querySelector('header');

  const toggleMenu = () => {
    mobileMenu?.classList.toggle('hidden');
    iconMenu?.classList.toggle('hidden');
    iconClose?.classList.toggle('hidden');
  };

  menuToggle?.addEventListener('click', toggleMenu);

  // Close menu when a link is clicked
  mobileLinks.forEach(link => {
    link.addEventListener('click', toggleMenu);
  });

  // --- Dark Mode Logic ---
  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");
    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  };

  document.getElementById("theme-toggle")?.addEventListener("click", handleToggleClick);
  document.getElementById("theme-toggle-mobile")?.addEventListener("click", handleToggleClick);
</script>
